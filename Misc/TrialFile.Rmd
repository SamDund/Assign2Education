---
title: "Untitled"
author: "Sam"
date: "October 18, 2014"
output: html_document
---

This is an extra file for trying out features including making maps for the proposal.

```{r echo=FALSE, cache=TRUE}
install.packages('maptools')
library(maptools)
install.packages('maps')
library(maps)
install.packages('mapproj')
library(mapproj)
install.packages('ggmap')
library(ggmap)
install.packages('mapdata')
library(mapdata)

library(sp)
library(lattice)
install.packages('latticeExtra')
library(latticeExtra)
library(colorspace)


# Create maps of Sweden, France, and the UK using maps and mapdata packages
map('worldHires', 'sweden', col="gray90", fill=TRUE)

map('worldHires',
    c('UK', 'Ireland', 'Isle of Man','Isle of Wight','Wales:Anglesey'),
    xlim=c(-11,3), ylim=c(49,60.9),
    col="gray90", fill=TRUE)

map('worldHires','France', xlim=c(-8.2,8.5), ylim=c(42.2,51.1),
    col="gray90", fill=TRUE)

### Need a map of 3 kinds of welfare states
### Scandanavian
### Market oriented (UK)
### France/Germany - state established historical welfare state

```

<p align="center">
[<img align="center" src="img/OECDChart.png" alt="Factors Affecting Entrepreneurship" height=350 width=450 />](img/OECDChart.png)</br>
</p>
<p align="center">
Source: OECD Local Entrepreneurship Reviews [@OECD2009]
</p>

![Untitled.png](~/DataAnalysis)

``` {r}

#### Import WDI Annual GDP Growth Data ####
GDPGrowth = WDI(indicator='NY.GDP.MKTP.KD.ZG', country=c('MX','CA','US','FR','AU','AT','BE',
                                                         'CL','CZ','DK','EE','FI','DE','HU', 
                                                         'IS','IE','IL','IT','JP','KR','LU',
                                                         'NL','NZ','NO','PL','PT','SK','SI',
                                                         'ES','SE','CH','TR','GB','US','GR'), 
                start=2001, end=2013)
# Rename columns
GDPGrowth <- plyr::rename(x = GDPGrowth, 
                                      replace = c("year" = "Year",
                                                  "NY.GDP.MKTP.KD.ZG" = "AnnualGDPGrowth",
                                                  "country" = "Country"))


# Recode country == "United States" to "United States of America" and Korea, Rep. to Korea (South)
GDPGrowth$Country[GDPGrowth$Country == "United States"] <- "United States of America"

# Recode country == "Korea, Rep."" to "Korea (South)"
GDPGrowth$Country[GDPGrowth$Country == "Korea, Rep."] <- "Korea (South)"

# Remove iso2c data to ease merge with FinalMerge data
GDPGrowth$iso2c <- NULL


# Merge GDPGrowth and FinalGEM
CompleteDataset <- merge(FinalGEM, GDPGrowth,
                   union("Country", "Year"),
                   all = TRUE) 

```

``` {r}

CleanMerge <- cbind(names = c(rownames(Clean01), rownames(Clean02), rownames(Clean03),
                              rownames(Clean04), rownames(Clean05), rownames(Clean06),
                              rownames(Clean07), rownames(Clean08), rownames(Clean09),
                              rownames(Clean10)),
                    rbind.fill(list(Clean01, Clean02, Clean03, Clean04, Clean05, Clean06,
                                    Clean07, Clean08, Clean09, Clean10)))



# Change merged data from wide to long
LongGEM<- melt(data = Merged9,
                  id.vars = c("Country"),
                  measure.vars = c("2001", "2002", "2003", "2004", "2005", "2006",
                                   "2007", "2008", "2009", "2010"))

# Rename columns
names(LongGEM) <- gsub("variable", "Year", names(LongGEM))
names(LongGEM) <- gsub("value", "Support", names(LongGEM))


# Create a vector with OECD countries
myvars <- c('Australia', 'Austria', 'Belgium', 'Canada', 'Chile', 'Czech Republic', 'Denmark', 'Estonia', 'Finland', 'France', 'Germany', 'Greece', 'Hungary', 'Iceland', 'Ireland', 'Israel', 'Italy', 'Japan', 'South Korea', 'Luxemburg', 'Mexico', 'Netherlands', 'New Zealand', 'Norway', 'Poland', 'Portugal', 'Slovak Republic', 'Slovenia', 'Spain', 'Sweden', 'Switzerland', 'Turkey', 'United Kingdom', 'United States')

# Subset LongGEM with the countries we need
subset_data <- subset(LongGEM, Country %in% myvars)

# Delete unnecessary column
subset_data$row.names <- NULL

# Arrange subset_data by country and year
GrandData <- arrange(subset_data, Country, Year) 

GrandData1 <- GrandData[order("Country",)]

########### STUCK #############

FinalData <- merge(FinalGEM, GrandData,
                   union("Country", "Year"))
```
